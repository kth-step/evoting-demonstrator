STABLE_TESTS = TEST_DMMU_UNMAP_L1_ENTRY TEST_DMMU_MAP_L1_SECTION TEST_DMMU_CREATE_L1 TEST_DMMU_CREATE_L1_EMPTY_L1 TEST_DMMU_CREATE_L2 TEST_DMMU_MAP_L1_PT \
				TEST_DMMU_L2_MAP_ENTRY TEST_DMMU_L2_UNMAP_ENTRY TEST_DMMU_L2_UNMAP_PT TEST_DMMU_CREATE_AND_SWITCH_L1 TEST_DMMU_SWITCH_L1 TEST_DMMU_UNMAP_L1_PT TEST_EX_1 TEST_EX_2 TEST_XREF_5MB_ALLOCATED TEST_XREF_CREATE_EMPTY_L2 TEST_XREF_CREATE_L1_PT \
TEST_XREF_L1_PT_MAP TEST_XREF_QUERY TEST_XREF_UNMAP_L1_ENTRY TEST_XREF_MAP_L1_SECTION
ALL_TESTS = $(STABLE_TESTS)
ALL_TESTS +=    

all: $(STABLE_TESTS)

clean:
	cd ../..; make clean

$(ALL_TESTS):%:
	echo $@
	cd ../../guests/dtest/; make clean
	cd ../..; make TEST_NAME=$@
	./deploy.sh;
	./run.sh | ./test_parser.py

